<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="75e9240d-44e2-475b-b47b-e22a3946ccdd" activeEnvironment="Default" name="REST Project 1" resourceRoot="" soapui-version="5.8.0" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:RestService" id="e9d68a1e-844b-4547-82e2-3beb5aa03afd" wadlVersion="http://wadl.dev.java.net/2009/02" name="https://users-api.projects.icanbreakit.eu" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>https://users-api.projects.icanbreakit.eu</con:endpoint></con:endpoints><con:resource name="01-register" path="/register" id="0f3f01ee-ce9f-42c1-a109-14107284c763"><con:settings/><con:parameters/><con:method name="register valid user" id="9f990036-2448-494a-8d92-e4164750ac62" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>text/html; charset=utf-8</con:mediaType><con:status>400</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>201</con:status><con:params/><con:element xmlns:reg="https://users-api.projects.icanbreakit.eu/register">reg:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>400</con:status><con:params/><con:element xmlns:reg="https://users-api.projects.icanbreakit.eu/register">reg:Fault</con:element></con:representation><con:request name="Request 1" id="e44b1dbd-8a54-49d3-babe-6d3b35ed2f85" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://users-api.projects.icanbreakit.eu</con:endpoint><con:request>{
"email": "myname@icanbreakit.eu",
"password": "myPassword"
}</con:request><con:originalUri>https://users-api.projects.icanbreakit.eu/register</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:request></con:method></con:resource><con:resource name="02-login" path="/login" id="82517be3-9b7e-4427-ae4e-6248ce56506e"><con:settings/><con:parameters/><con:method name="Method 1" id="b27dba24-8d07-48fb-90f8-c28edb059b12" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:log="https://users-api.projects.icanbreakit.eu/login">log:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html; charset=utf-8</con:mediaType><con:status>400</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>401</con:status><con:params/><con:element xmlns:log="https://users-api.projects.icanbreakit.eu/login">log:Fault</con:element></con:representation><con:request name="Request 1" id="b77a6049-87a9-4abc-aaf5-eedeb4b3541b" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://users-api.projects.icanbreakit.eu</con:endpoint><con:request>{
"email": "myname@icanbreakit.eu",
"password": "myPassword"
}</con:request><con:originalUri>https://users-api.projects.icanbreakit.eu/login</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="03-get-users" path="/users" id="23e077dc-fac2-46a0-8aab-b56c917358f8"><con:settings/><con:parameters/><con:method name="get" id="351f4c78-0840-4ee9-9995-547653d8af30" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element>Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>403</con:status><con:params/><con:element xmlns:user="https://users-api.projects.icanbreakit.eu/users">user:Fault</con:element></con:representation><con:request name="Request 1" id="1f4bb6d2-7e6a-47ba-9923-7e24d03de6b2" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MTEsImVtYWlsIjoibXluYW1lQGljYW5icmVha2l0LmV1IiwiaWF0IjoxNzUzNzg2MDgwLCJleHAiOjE3NTM3ODYzODB9.lrs-tuV5Yse-D55pT7vai6WMfP5N1_AM_WnlKlXkR-0" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://users-api.projects.icanbreakit.eu</con:endpoint><con:request/><con:originalUri>https://users-api.projects.icanbreakit.eu/users</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="04-post-user" path="/users" id="c4694fac-9254-4122-9f12-b7cc5ca40d55"><con:settings/><con:parameters/><con:method name="post" id="6555f95c-fbda-41cf-84e7-2e988325ae80" method="POST"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>401 403 400</con:status><con:params/><con:element xmlns:user="https://users-api.projects.icanbreakit.eu/users">user:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>201</con:status><con:params/><con:element xmlns:user="https://users-api.projects.icanbreakit.eu/users">user:Response</con:element></con:representation><con:request name="Request 1" id="38a5b7b7-eb06-46a1-9487-6186bdba3577" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MTEsImVtYWlsIjoibXluYW1lQGljYW5icmVha2l0LmV1IiwiaWF0IjoxNzUzNzkwNzI5LCJleHAiOjE3NTM3OTEwMjl9.OU4GzENf__tja0fQgrRPZGa2TzcM1wIyunM2Ck030LQ" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://users-api.projects.icanbreakit.eu</con:endpoint><con:request>{
	"name":"John",
	"email":"john@icanbreakit.eu",
	"age":"22",
	"role":"admin"
}</con:request><con:originalUri>https://users-api.projects.icanbreakit.eu/users</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource><con:resource name="05-put-user" path="/users/{id}" id="3feb0e19-c900-4da9-90f6-6b344b749287"><con:settings/><con:parameters><con:parameter><con:name>id</con:name><con:value>15</con:value><con:style>TEMPLATE</con:style><con:default>15</con:default></con:parameter></con:parameters><con:method name="put" id="55bd119e-b0c5-40c6-a162-5bd72eb2e41e" method="PUT"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="FAULT"><con:mediaType>text/html; charset=utf-8</con:mediaType><con:status>404 400</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:put="https://users-api.projects.icanbreakit.eu/put">put:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>403</con:status><con:params/><con:element xmlns:put="https://users-api.projects.icanbreakit.eu/put">put:Fault</con:element></con:representation><con:request name="Request 1" id="3566a654-c87f-47e5-b770-d14239e41d1f" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MTEsImVtYWlsIjoibXluYW1lQGljYW5icmVha2l0LmV1IiwiaWF0IjoxNzUzNzkwNzI5LCJleHAiOjE3NTM3OTEwMjl9.OU4GzENf__tja0fQgrRPZGa2TzcM1wIyunM2Ck030LQ" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://users-api.projects.icanbreakit.eu</con:endpoint><con:request>{"name": "John Doe"}</con:request><con:originalUri>https://users-api.projects.icanbreakit.eu/put</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="id" value="15" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>id</con:entry></con:parameterOrder></con:request></con:method></con:resource><con:resource name="06-delete-user" path="/users/{id}" id="6f41820c-96a8-4f37-928d-ea22299d3d2d"><con:settings/><con:parameters><con:parameter><con:name>id</con:name><con:value>id</con:value><con:style>TEMPLATE</con:style><con:default>id</con:default></con:parameter></con:parameters><con:method name="delete" id="7b1da146-b27f-4802-9221-bbbf27e81fbd" method="DELETE"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>400 403</con:status><con:params/><con:element xmlns:id="https://users-api.projects.icanbreakit.eu/users/id">id:Fault</con:element></con:representation><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType xsi:nil="true"/><con:status>204</con:status><con:params/><con:element>data</con:element></con:representation><con:request name="Request 1" id="54d7961e-8a54-4db2-a208-90be469870b8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MTEsImVtYWlsIjoibXluYW1lQGljYW5icmVha2l0LmV1IiwiaWF0IjoxNzUzNzkwNzI5LCJleHAiOjE3NTM3OTEwMjl9.OU4GzENf__tja0fQgrRPZGa2TzcM1wIyunM2Ck030LQ" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://users-api.projects.icanbreakit.eu</con:endpoint><con:request/><con:originalUri>https://users-api.projects.icanbreakit.eu/users/id</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="id" value="15" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:request></con:method></con:resource><con:resource name="07-delete-all-users" path="/users" id="5288c013-b5cf-48bd-8256-b3e6ea239e81"><con:settings/><con:parameters/><con:method name="delete all" id="ce1aa2b2-856e-4daf-bb0c-905dd1fac7f0" method="DELETE"><con:settings/><con:parameters/><con:representation type="REQUEST"><con:mediaType>application/json</con:mediaType><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:user="https://users-api.projects.icanbreakit.eu/users">user:Response</con:element></con:representation><con:request name="Request 1" id="ee6a0336-19e8-4c50-98e1-f3b89650eed1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MTEsImVtYWlsIjoibXluYW1lQGljYW5icmVha2l0LmV1IiwiaWF0IjoxNzUzNzkxODgwLCJleHAiOjE3NTM3OTIxODB9.C_74nTynkj75OV6VI9I4n7cMMmcceCYAjpI-AXzTeRc" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://users-api.projects.icanbreakit.eu</con:endpoint><con:request/><con:originalUri>https://users-api.projects.icanbreakit.eu/users</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:request></con:method></con:resource></con:interface><con:testSuite id="fe03ed28-1f56-43a4-89fe-f8fed4755c24" name="TestSuite 1"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="ba323ac7-8750-4657-9461-e1e3ae7575ab" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="E2E" searchProperties="true"><con:settings/><con:testStep type="groovy" name="generateRandomEmail" id="cca3c1fe-cf1c-4f26-ac39-736ea93a3e79"><con:settings/><con:config><script>def timestamp = System.currentTimeMillis()
def randomEmail = "user_${timestamp}@icanbreakit.eu"

// Save properties to use in the next request
testRunner.testCase.testSuite.setPropertyValue("randomEmail", randomEmail)
log.info("randomEmail: " + randomEmail)</script></con:config></con:testStep><con:testStep type="restrequest" name="register" id="c21f94b2-f7ac-4bf7-b90e-11e0a8d11fa7"><con:settings/><con:config service="https://users-api.projects.icanbreakit.eu" resourcePath="/register" methodName="register valid user" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="register" id="e44b1dbd-8a54-49d3-babe-6d3b35ed2f85" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://users-api.projects.icanbreakit.eu</con:endpoint><con:request>{
"email": "${#TestSuite#randomEmail}",
"password": "myPassword"
}</con:request><con:originalUri>https://users-api.projects.icanbreakit.eu/register</con:originalUri><con:assertion type="JsonPath Match" id="c6081031-644c-4f40-a87f-3f4f64f484f1" name="JsonPath Match"><con:configuration><path>$.message</path><content>User registered</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Valid HTTP Status Codes" id="4e607dce-8824-4ece-a313-3003732d0fb8" name="Valid HTTP Status Codes"><con:configuration><codes>201</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/><con:parameterOrder/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="login" id="97c42b2b-a81c-4535-9d57-927d8cf41466"><con:settings/><con:config service="https://users-api.projects.icanbreakit.eu" resourcePath="/login" methodName="Method 1" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="login" id="b77a6049-87a9-4abc-aaf5-eedeb4b3541b" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://users-api.projects.icanbreakit.eu</con:endpoint><con:request>{
"email": "${#TestSuite#randomEmail}",
"password": "myPassword"
}</con:request><con:originalUri>https://users-api.projects.icanbreakit.eu/login</con:originalUri><con:assertion type="GroovyScriptAssertion" id="2a81e826-50fc-41fd-b840-fd8143846ace" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper

def response = messageExchange.responseContent
def json = new JsonSlurper().parseText(response)

assert json.token != null : "Token is missing in the response"
</scriptText></con:configuration></con:assertion><con:assertion type="JsonPath RegEx Match" id="5bc8f159-c796-4972-9b29-84455965e1ec" name="JsonPath RegEx Match"><con:configuration><path>$.token</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments><regEx>.*</regEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="transferToken" id="261142d1-daa9-430a-86c9-2c116e5e1d8b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>token</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>login</con:sourceStep><con:sourcePath>$.token</con:sourcePath><con:targetType>token</con:targetType><con:targetStep>#TestSuite#</con:targetStep><con:type>JSONPATH</con:type><con:targetTransferType>JSONPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="getUsersBeforePost" id="bfcf6742-5320-46e8-b71f-8d5692e8d767"><con:settings/><con:config service="https://users-api.projects.icanbreakit.eu" resourcePath="/users" methodName="get" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="get users" id="1f4bb6d2-7e6a-47ba-9923-7e24d03de6b2" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="Bearer ${#TestSuite#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://users-api.projects.icanbreakit.eu</con:endpoint><con:request/><con:originalUri>https://users-api.projects.icanbreakit.eu/users</con:originalUri><con:assertion type="JsonPath Match" id="2435f6d4-f420-4e06-90d8-ff6d08fcc9d1" name="JsonPath Match"><con:configuration><path>$</path><content>[]</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="postUser" id="9c8d3fe0-8523-41ab-b276-c665682d3dcf"><con:settings/><con:config service="https://users-api.projects.icanbreakit.eu" resourcePath="/users" methodName="post" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="post user" id="38a5b7b7-eb06-46a1-9487-6186bdba3577" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="Bearer ${#TestSuite#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://users-api.projects.icanbreakit.eu</con:endpoint><con:request>${#TestSuite#user_01_request}</con:request><con:originalUri>https://users-api.projects.icanbreakit.eu/users</con:originalUri><con:assertion type="JsonPath RegEx Match" id="05f33bdd-5ccb-4c91-be8b-1bdd650cfd34" name="JsonPath RegEx Match"><con:configuration><path>$.id</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments><regEx>\d*</regEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="fcceacaf-7c10-43de-815c-6a3bbbedbcfe" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper

def requestText = context.expand('${request}')
def requestJson = new JsonSlurper().parseText(requestText)

def responseText = messageExchange.responseContent
def responseJson = new JsonSlurper().parseText(responseText)

// compare mutual fields
assert responseJson.name == requestJson.name
assert responseJson.email == requestJson.email
assert responseJson.age.toString() == requestJson.age
assert responseJson.role == requestJson.role

// id
assert responseJson.containsKey('id') : "ID field is missing"
assert responseJson.id.toString().isNumber() : "ID is not a number"

// adult
assert responseJson.containsKey('adult') : "ID field is missing"
def validRoles = ["admin", "user"]
assert validRoles.contains(responseJson.role) : "Unexpected role: ${json.role}"

// ownerId
assert responseJson.containsKey('ownerId') : "ID field is missing"
assert responseJson.ownerId.toString().isNumber() : "ID is not a number"
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="transferId_01" id="a287de02-887b-49f9-8160-71550a46982d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>postUser</con:sourceStep><con:sourcePath>id</con:sourcePath><con:targetType>id_01</con:targetType><con:targetStep>#TestSuite#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>user</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>postUser</con:sourceStep><con:sourcePath/><con:targetType>user_01</con:targetType><con:targetStep>#TestSuite#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="getUsersAfterPost" id="95c6b829-62eb-4485-9097-ac1c67312006"><con:settings/><con:config service="https://users-api.projects.icanbreakit.eu" resourcePath="/users" methodName="get" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getUsersAfterPost" id="1f4bb6d2-7e6a-47ba-9923-7e24d03de6b2" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="Bearer ${#TestSuite#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://users-api.projects.icanbreakit.eu</con:endpoint><con:request/><con:originalUri>https://users-api.projects.icanbreakit.eu/users</con:originalUri><con:assertion type="GroovyScriptAssertion" id="0808279b-1a94-4c71-a972-588fe682a841" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper

def savedUser = context.expand('${postUser#Response}')
def savedUserJson = new JsonSlurper().parseText(savedUser)
log.info(savedUser)

def responseText = messageExchange.responseContent
def responseJson = new JsonSlurper().parseText(responseText)
log.info(responseText)

assert responseJson[0].id == savedUserJson.id
assert responseJson[0].name == savedUserJson.name
assert responseJson[0].email == savedUserJson.email
assert responseJson[0].age == savedUserJson.age
assert responseJson[0].role == savedUserJson.role
assert responseJson[0].adult == savedUserJson.adult
assert responseJson[0].ownerId == savedUserJson.ownerId
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="postUser_02" id="54396423-b5c6-4edc-92c3-f45f4202d3eb"><con:settings/><con:config service="https://users-api.projects.icanbreakit.eu" resourcePath="/users" methodName="post" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="postUser_2" id="38a5b7b7-eb06-46a1-9487-6186bdba3577" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="Bearer ${#TestSuite#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://users-api.projects.icanbreakit.eu</con:endpoint><con:request>{
	"name":"John",
	"email":"john@icanbreakit.eu",
	"age":"22",
	"role":"admin"
}</con:request><con:originalUri>https://users-api.projects.icanbreakit.eu/users</con:originalUri><con:assertion type="JsonPath RegEx Match" id="05f33bdd-5ccb-4c91-be8b-1bdd650cfd34" name="JsonPath RegEx Match"><con:configuration><path>$.id</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments><regEx>\d*</regEx></con:configuration></con:assertion><con:assertion type="GroovyScriptAssertion" id="fcceacaf-7c10-43de-815c-6a3bbbedbcfe" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper

def requestText = context.expand('${request}')
def requestJson = new JsonSlurper().parseText(requestText)

def responseText = messageExchange.responseContent
def responseJson = new JsonSlurper().parseText(responseText)

// compare mutual fields
assert responseJson.name == requestJson.name
assert responseJson.email == requestJson.email
assert responseJson.age.toString() == requestJson.age
assert responseJson.role == requestJson.role

// id
assert responseJson.containsKey('id') : "ID field is missing"
assert responseJson.id.toString().isNumber() : "ID is not a number"

// adult
assert responseJson.containsKey('adult') : "ID field is missing"
def validRoles = ["admin", "user"]
assert validRoles.contains(responseJson.role) : "Unexpected role: ${json.role}"

// ownerId
assert responseJson.containsKey('ownerId') : "ID field is missing"
assert responseJson.ownerId.toString().isNumber() : "ID is not a number"
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="transfer" name="transferId_02" id="eeaf0c4e-c20b-469a-a38b-25a326034f19"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>id</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>postUser_02</con:sourceStep><con:sourcePath>id</con:sourcePath><con:targetType>id_02</con:targetType><con:targetStep>#TestSuite#</con:targetStep><con:type>JSONPATH</con:type><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>user</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>postUser</con:sourceStep><con:sourcePath/><con:targetType>user_01</con:targetType><con:targetStep>#TestSuite#</con:targetStep><con:type>XPATH</con:type><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="restrequest" name="getUsersAfterPost_02" id="dfe2adb4-00dd-42ef-8520-927bd2650519"><con:settings/><con:config service="https://users-api.projects.icanbreakit.eu" resourcePath="/users" methodName="get" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="Copy of getUsersAfterPost_2" id="1f4bb6d2-7e6a-47ba-9923-7e24d03de6b2" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="Bearer ${#TestSuite#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://users-api.projects.icanbreakit.eu</con:endpoint><con:request/><con:originalUri>https://users-api.projects.icanbreakit.eu/users</con:originalUri><con:assertion type="GroovyScriptAssertion" id="0808279b-1a94-4c71-a972-588fe682a841" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper

def savedUser_01 = context.expand('${postUser#Response}')
def savedUser_01Json = new JsonSlurper().parseText(savedUser_01)
log.info(savedUser_01)

def savedUser_02 = context.expand('${postUser_02#Response}')
def savedUser_02Json = new JsonSlurper().parseText(savedUser_02)
log.info("savedUser_02: " + savedUser_02)

def responseText = messageExchange.responseContent
def responseJson = new JsonSlurper().parseText(responseText)
log.info(responseText)

// get the id of the first POST
def id_01 = context.expand('${#TestSuite#id_01}')
def responseUser_01 = responseJson.find( user -> user.id == id_01.toInteger())
log.info("responseUser_01: " + responseUser_01)

// get the id of the second POST
def id_02 = context.expand('${#TestSuite#id_02}')
def responseUser_02 = responseJson.find( user -> user.id == id_02.toInteger())
log.info("responseUser_02: " + responseUser_02)

assert responseJson.size() == 2
assert savedUser_01Json == responseUser_01
assert savedUser_02Json == responseUser_02
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="putUser_01" id="4de2a633-d831-482b-be40-484384b4b276"><con:settings/><con:config service="https://users-api.projects.icanbreakit.eu" resourcePath="/users/{id}" methodName="put" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="putUser_01" id="3566a654-c87f-47e5-b770-d14239e41d1f" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="Bearer ${#TestSuite#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://users-api.projects.icanbreakit.eu</con:endpoint><con:request>{"name": "${#TestSuite#putName}"}</con:request><con:originalUri>https://users-api.projects.icanbreakit.eu/put</con:originalUri><con:assertion type="JsonPath Match" id="aab86803-1533-400f-8959-7c5af5b7cb1c" name="has correct id"><con:configuration><path>id</path><content>${#TestSuite#id_01}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="4f6d1d7d-7f1e-4dac-8a89-ba14fd7fccc2" name="has updated name"><con:configuration><path>name</path><content>${#TestSuite#putName}</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="id" value="${#TestSuite#id_01}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>id</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="getUsersAfterPut" id="7c72985f-be46-49ef-97a2-b57c69bda470"><con:settings/><con:config service="https://users-api.projects.icanbreakit.eu" resourcePath="/users" methodName="get" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getUsersAfterPut" id="1f4bb6d2-7e6a-47ba-9923-7e24d03de6b2" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="Bearer ${#TestSuite#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://users-api.projects.icanbreakit.eu</con:endpoint><con:request/><con:originalUri>https://users-api.projects.icanbreakit.eu/users</con:originalUri><con:assertion type="JsonPath Match" id="bd191fb7-6515-45b5-a310-c7784f431d21" name="user_01 name"><con:configuration><path>[?(@.id == ${#TestSuite#id_01})].name</path><content>[${#TestSuite#putName}]</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Match" id="473be9e7-0ef6-4a1b-80c2-d74b7c344a92" name="user_02 name"><con:configuration><path>[?(@.id==${#TestSuite#id_02})].name</path><content>[John]</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="289253c2-0964-4518-bc2a-f85e8fb06c89" name="JsonPath Count"><con:configuration><path>$[*]</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="deleteUser_02" id="3bb0e333-4698-46f9-bba6-03ae901e0f65"><con:settings/><con:config service="https://users-api.projects.icanbreakit.eu" resourcePath="/users/{id}" methodName="delete" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="deleteUser_02" id="54d7961e-8a54-4db2-a208-90be469870b8" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="Bearer ${#TestSuite#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://users-api.projects.icanbreakit.eu</con:endpoint><con:request/><con:originalUri>https://users-api.projects.icanbreakit.eu/users/id</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="f0270820-ac51-4422-b8f4-89d584d171cb" name="Valid HTTP Status Codes"><con:configuration><codes>204</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="id" value="${#TestSuite#id_02}" xmlns="http://eviware.com/soapui/config"/></con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="getUsersAfterDelete" id="51f16643-3130-4feb-91bc-bf5408fad9ed"><con:settings/><con:config service="https://users-api.projects.icanbreakit.eu" resourcePath="/users" methodName="get" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getUsersAfterDelete" id="1f4bb6d2-7e6a-47ba-9923-7e24d03de6b2" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="Bearer ${#TestSuite#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://users-api.projects.icanbreakit.eu</con:endpoint><con:request/><con:originalUri>https://users-api.projects.icanbreakit.eu/users</con:originalUri><con:assertion type="JsonPath Match" id="bd191fb7-6515-45b5-a310-c7784f431d21" name="user_01 name"><con:configuration><path>[?(@.id == ${#TestSuite#id_01})].name</path><content>[${#TestSuite#putName}]</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="JsonPath Count" id="289253c2-0964-4518-bc2a-f85e8fb06c89" name="JsonPath Count"><con:configuration><path>$[*]</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="postUser_03" id="0b26dbd1-2b81-4a65-a111-749c593ab957"><con:settings/><con:config service="https://users-api.projects.icanbreakit.eu" resourcePath="/users" methodName="post" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="postUser_03" id="38a5b7b7-eb06-46a1-9487-6186bdba3577" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="Bearer ${#TestSuite#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://users-api.projects.icanbreakit.eu</con:endpoint><con:request>{
	"name":"John",
	"email":"john@icanbreakit.eu",
	"age":"22",
	"role":"admin"
}</con:request><con:originalUri>https://users-api.projects.icanbreakit.eu/users</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="8cb24756-9bd3-49f1-90e9-29c487dab506" name="Valid HTTP Status Codes"><con:configuration><codes>201</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="getUsers" id="18ab463f-1663-439c-a6bb-e9eac5c9dc25"><con:settings/><con:config service="https://users-api.projects.icanbreakit.eu" resourcePath="/users" methodName="get" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getUsers" id="1f4bb6d2-7e6a-47ba-9923-7e24d03de6b2" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="Bearer ${#TestSuite#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://users-api.projects.icanbreakit.eu</con:endpoint><con:request/><con:originalUri>https://users-api.projects.icanbreakit.eu/users</con:originalUri><con:assertion type="JsonPath Count" id="289253c2-0964-4518-bc2a-f85e8fb06c89" name="JsonPath Count"><con:configuration><path>$[*]</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="deleteAll" id="c60ed81e-fff2-4665-821b-640a20988783"><con:settings/><con:config service="https://users-api.projects.icanbreakit.eu" resourcePath="/users" methodName="delete all" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="deleteAll" id="ee6a0336-19e8-4c50-98e1-f3b89650eed1" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;entry key="Authorization" value="Bearer ${#TestSuite#token}" xmlns="http://eviware.com/soapui/config"/></con:setting></con:settings><con:endpoint>https://users-api.projects.icanbreakit.eu</con:endpoint><con:request/><con:originalUri>https://users-api.projects.icanbreakit.eu/users</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="cda9aee7-d171-47d3-9b81-918420f89797" name="Valid HTTP Status Codes"><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters/></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:properties><con:property><con:name>randomEmail</con:name><con:value>user_1753964561074@icanbreakit.eu</con:value></con:property><con:property><con:name>token</con:name><con:value>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NDAsImVtYWlsIjoidXNlcl8xNzUzOTY0NTYxMDc0QGljYW5icmVha2l0LmV1IiwiaWF0IjoxNzUzOTY0NTYzLCJleHAiOjE3NTM5NjQ4NjN9.jqDZ6-pqRhG9V9AtmhF4p7gaj_dDCangd7Jmx7-gULg</con:value></con:property><con:property><con:name>id_01</con:name><con:value>52</con:value></con:property><con:property><con:name>user_01</con:name><con:value>{"id":52,"name":"Peter","email":"peter@icanbreakit.eu","age":33,"role":"user","adult":true,"ownerId":40}</con:value></con:property><con:property><con:name>id_02</con:name><con:value>53</con:value></con:property><con:property><con:name>putName</con:name><con:value>Mr. Renamed</con:value></con:property><con:property><con:name>user_01_request</con:name><con:value>{ 	"name":"Peter", 	"email":"peter@icanbreakit.eu", 	"age":"33", 	"role":"user" }</con:value></con:property><con:property><con:name>user_02_request</con:name><con:value>{ 	"name":"John", 	"email":"john@icanbreakit.eu", 	"age":"22", 	"role":"admin" }</con:value></con:property></con:properties><con:setupScript/></con:testSuite><con:properties/><con:wssContainer/><con:oAuth2ProfileContainer/><con:oAuth1ProfileContainer/><con:sensitiveInformation/></con:soapui-project>